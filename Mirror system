-- backbone version of the script
local first = 45
local second = -90
local third = 180
local fourth = 90


local p1 = script.Parent.p1
local p2 = script.Parent.p2
local p3 = script.Parent.p3
local p4 = script.Parent.p4


local particle1 = script.Parent.Particles.Particle1.Attachment.ParticleEmitter
local particle2 = script.Parent.Particles.Particle2.Attachment.ParticleEmitter
local particle3 = script.Parent.Particles.Particle3.Attachment.ParticleEmitter
local particle4 = script.Parent.Particles.Particle4.Attachment.ParticleEmitter
local particle0 = script.Parent.Particles.Particle0.Attachment.ParticleEmitter



script.Parent.Start.ClickDetector.MouseClick:Connect(function()-- function checks if the orientation of the mirrors are correct and shoots out the particle
	particle0:Emit(15)
	wait(1)
	particle1.Orientation = p1.Orientation
	particle1:Emit(15)
	wait(1)
	if p1.Orientation == Vector3.new(0, first, 0) then
		particle2.Orientation = p2.Orientation
		particle2:Emit(15)
		wait(1)
		if p2.Orientation == Vector3.new(0, second, 0) then
			particle3.Orientation = p3.Orientation
			particle3:Emit(15)
			wait(1)
			if p3.Orientation == Vector3.new(0, third, 0) then
				particle4.Orientation = p4.Orientation
				particle4:Emit(15)
				wait(1)
				if p4.Orientation == Vector3.new(0, fourth, 0) then
					script.Parent.TouchBlock.BrickColor = BrickColor.new("Sea green")
				else
					p1.Orientation = p1.Orientation * Vector3.new(0, 0, 0) -- reseting the orientation
					p2.Orientation = p1.Orientation * Vector3.new(0, 0, 0)
					p3.Orientation = p1.Orientation * Vector3.new(0, 0, 0)
					p4.Orientation = p1.Orientation * Vector3.new(0, 0, 0)
					print("Error Wrong oreintation")
				end
			else 
				p1.Orientation = p1.Orientation * Vector3.new(0, 0, 0) 
				p2.Orientation = p1.Orientation * Vector3.new(0, 0, 0)
				p3.Orientation = p1.Orientation * Vector3.new(0, 0, 0)
				p4.Orientation = p1.Orientation * Vector3.new(0, 0, 0)
				print("Error Wrong oreintation")
			end
		else 
			p1.Orientation = p1.Orientation * Vector3.new(0, 0, 0)
			p2.Orientation = p1.Orientation * Vector3.new(0, 0, 0)
			p3.Orientation = p1.Orientation * Vector3.new(0, 0, 0)
			p4.Orientation = p1.Orientation * Vector3.new(0, 0, 0)
			print("Error Wrong oreintation")
		end
	else 
		p1.Orientation = p1.Orientation * Vector3.new(0, 0, 0)
		p2.Orientation = p1.Orientation * Vector3.new(0, 0, 0)
		p3.Orientation = p1.Orientation * Vector3.new(0, 0, 0)
		p4.Orientation = p1.Orientation * Vector3.new(0, 0, 0)
		print("Error Wrong oreintation")
	end
end)




----
-- This is a seperate script located on the mirror so the first script can detect when it is clicked
local part = script.Parent.Parent

script.Parent.MouseClick:Connect(function()
	part.Orientation = part.Orientation + Vector3.new(0,45,0)
end)
