wait(2) -- allowing for everything to load in before running the script
local first = 4
local second = first..4
local third = second..0
local code = third..5 -- creating the passcode like this prevents the number four thousand and five to be created and instead adds them together as individual numbers. Basically the digit does not go up

local press = game.Workspace.Passcode.Click.press
local errorsound = game.Workspace.Passcode.Click.error
local success = game.Workspace.Passcode.Click.success
local passcodebrick = game.Workspace.Passcode


passcodebrick.Click.ClickDetector.MouseClick:Connect(function() -- when the player activated the proximity prompt by pressing 'e', it should run this function which reactivates the button on the GUI and makes it visible
	print(1)
	game.Players.LocalPlayer.PlayerGui.Passcode.Enabled = true
end)
local debounce = false -- to allow and stop the inputting of text
local limit = 0 -- the variable we will be reffering to allow for the amount of text allowed

script.Parent.b0.MouseButton1Click:Connect(function()
	if limit == 4 then -- checks if limit hits '4' and if it did stops the input of the text
		debounce = true
	elseif limit < 4 then -- if its less, then continue
		debounce = false
	end
	if debounce == false then
		limit = limit + 1 -- adds on the limit.
		script.Parent.Number.Text = script.Parent.Number.Text..0 -- adds onto the string of the current line of text in the text label
		press:Play()
	end
end)

script.Parent.b1.MouseButton1Click:Connect(function()
	if limit == 4 then
		debounce = true
	elseif limit < 4 then
		debounce = false
	end
	if debounce == false then
		limit = limit + 1
		script.Parent.Number.Text = script.Parent.Number.Text..1
		press:Play()
	end
end)


script.Parent.b2.MouseButton1Click:Connect(function()
	if limit == 4 then
		debounce = true
	elseif limit < 4 then
		debounce = false
	end
	if debounce == false then
		limit = limit + 1
		script.Parent.Number.Text = script.Parent.Number.Text..2
		press:Play()
	end
end)


script.Parent.b3.MouseButton1Click:Connect(function()
	if limit == 4 then
		debounce = true
	elseif limit < 4 then
		debounce = false
	end
	if debounce == false then
		limit = limit + 1
		script.Parent.Number.Text = script.Parent.Number.Text..3
		press:Play()
	end
end)


script.Parent.b4.MouseButton1Click:Connect(function()
	if limit == 4 then
		debounce = true
	elseif limit < 4 then
		debounce = false
	end
	if debounce == false then
		limit = limit + 1
		script.Parent.Number.Text = script.Parent.Number.Text..4
		press:Play()
	end
end)


script.Parent.b5.MouseButton1Click:Connect(function()
	if limit == 4 then
		debounce = true
	elseif limit < 4 then
		debounce = false
	end
	if debounce == false then
		limit = limit + 1
		script.Parent.Number.Text = script.Parent.Number.Text..5
		press:Play()
	end
end)


script.Parent.b6.MouseButton1Click:Connect(function()
	if limit == 4 then
		debounce = true
	elseif limit < 4 then
		debounce = false
	end
	if debounce == false then
		limit = limit + 1
		script.Parent.Number.Text = script.Parent.Number.Text..6
		press:Play()
	end
end)


script.Parent.b7.MouseButton1Click:Connect(function()
	if limit == 4 then
		debounce = true
	elseif limit < 4 then
		debounce = false
	end
	if debounce == false then
		limit = limit + 1
		script.Parent.Number.Text = script.Parent.Number.Text..7
		press:Play()
	end
end)


script.Parent.b8.MouseButton1Click:Connect(function()
	if limit == 4 then
		debounce = true
	elseif limit < 4 then
		debounce = false
	end
	if debounce == false then
		limit = limit + 1
		script.Parent.Number.Text = script.Parent.Number.Text..8
		press:Play()
	end
end)


script.Parent.b9.MouseButton1Click:Connect(function()
	if limit == 4 then
		debounce = true
	elseif limit < 4 then
		debounce = false
	end
	if debounce == false then
		limit = limit + 1
		script.Parent.Number.Text = script.Parent.Number.Text..9
		press:Play()
	end
end)


script.Parent.Delete.MouseButton1Click:Connect(function() -- this function runs when the RESET button is pressed on the passcode GUI, when it runs it resets the limit back to 0 and makes the text blank.
	script.Parent.Number.Text = ""
	limit = 0
	press:Play()
end)

script.Parent.X.MouseButton1Click:Connect(function()
	game.Players.LocalPlayer.PlayerGui.Passcode.Enabled = false
	press:Play()
end)

local debounce2 = false
script.Parent.Enter.MouseButton1Click:Connect(function()
	if debounce2 == false then
		press:Play()
		if script.Parent.Number.Text == code then
			success:Play()
			debounce2 = true
			game.Players.LocalPlayer.PlayerGui.Passcode.Enabled = false
			passcodebrick.Light.BrickColor = BrickColor.new("Sea green")
			passcodebrick.Click.ClickDetector.MaxActivationDistance = 0
			game.Workspace.PassDoor.Part.Attachment.ProximityPrompt.Enabled = true
		elseif script.Parent.Number.Text ~= code then
			errorsound:Play()
			debounce2 = true
			for i, v in pairs(game.Players.LocalPlayer.PlayerGui.Passcode:GetChildren()) do
				if v:IsA("TextButton") then
					print("DEACTER")
					v.Active = false
					script.Parent.Delete.Visible = false
				end
			end
			script.Parent.Number.Text = "ERROR"
			wait(2)
			for i, v in pairs(game.Players.LocalPlayer.PlayerGui.Passcode:GetChildren()) do
				if v:IsA("TextButton") then
					print(2)
					v.Active = true
					script.Parent.Delete.Visible = true
				end
			end
			script.Parent.Number.Text = ""
			debounce2 = false
			limit = 0
		end
	end
end)
